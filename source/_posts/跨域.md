---
title: 跨域
date: 2020-09-01 06:56:51
tags:
- 跨域
categories:
- 前端
---

 ## 什么是跨域？

浏览器在不同的源上请求内容，就叫做跨域

## 什么是源，以及同源策略？

协议，域名，端口三者的组合即为源。同源策略是浏览器的一种核心安全机制，即一个源内的内容不能加载另外一个源的内容。

## 为什么会有同源策略？

同源策略的根本目的是为了保证浏览器用户的数据访问安全。假若浏览器中一个源的脚本可以控制浏览器访问其他任何源的内容时，将会造成很严重数据泄露。

## 怎么解决跨域？

当开发需要解决跨域问题时，我们应该想的是：怎么合法的从其他源获取数据？从这个问题出发，解决方案就有两个要素：

1. 请求方向目标源标注自己的身份，目标源如何处理请求交给目标源的服务器处理
2. 目标源响应时，标注哪些接收方是合法的

以上方案即HTTP协议给出CORS方案，是解决跨域问题的根本方案。[HTTP访问控制（CORS）](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS "MDN")这里有详细的基于HTTP CORS的描写。

另一种方案即使用JSONP方案。`<script>`标签的src属性是不受同源策略影响的，可以绕过同源策略。它必须指定回调函数，且服务器返回数据也必须配合客户端：将数据、js逻辑以及回调函数拼接成可执行js代码。JSONP只支持Get方法，并且容易受到XSS攻击。

## 为什么`<script>`标签不受跨域影响？

script 标签在源内是html文档的标签，不管它是不是用js生成的标签，这时它都可以理解为同源的。当它发送请求并且得到响应时，源内的脚本对响应的内容**没有**读写以及操作的权限。加载并运行的脚本也是其他源的脚本。这相当于把控制权交予响应回来的脚本。所以并没有安全问题。

## 总结

浏览器设计同源策略并不是为了完全杜绝跨域访问，所以，解决跨域问题的核心思想是：__跨域得来的数据，其访问权与执行权要完全交予目标源，本源内的脚本不能拥有读写执行跨域得来的数据的权限__

